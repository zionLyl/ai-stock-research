---
name: stock-screening
description: A股全市场量化筛选。从5000+只A股中用多因子模型筛出Top N。
---

# 全市场量化筛选

## 适用场景
- "帮我选几只A股"
- "全市场扫描一下"
- "有没有低估值高增长的"
- 定期（周/月）重新筛选组合

## 数据流

```
全量A股(~5500) → 硬性过滤(~1500) → 基础打分 → Top 200 技术增强 → 重新打分 → Top N
```

## 工作流

### Step 1: 运行筛选脚本
```bash
python3 scripts/cn_full_screen.py --top 50 --output /tmp/cn_screen.json
```

### Step 2: 审查结果
- 检查 Top 20 的行业分布（避免过度集中）
- 交叉验证异常值（PE 极低可能是一次性收益）
- 标注已在持仓/候选中的标的

### Step 3: 深入研究 Top 候选
对 Top 10-15 只：
1. `python3 scripts/cn_data.py {CODE} --json` 获取详细数据
2. MCP 搜索近期新闻/公告
3. 检查是否有即将到来的催化剂（财报、政策）
4. 用 `scoring.py` 做 6 维深度评分

### Step 4: 输出建议
- 推荐 Top N 只（含评分和理由）
- 每只标注：代码、名称、价格、PE、市值、综合分、推荐理由
- 标注风险因素

## 硬性过滤规则
- 市值 > 50亿
- 股价 > 3元
- 非 ST/退市
- PE > 0（盈利）
- 日成交额 > 5000万

## 5因子权重
| 因子 | 权重 | 数据来源 |
|------|------|---------|
| 成长 | 30% | 换手率、涨跌幅、RSI |
| 估值 | 25% | PE、PB |
| 质量 | 20% | 隐含ROE(PB/PE) |
| 安全 | 15% | 市值、流动性、距高点跌幅 |
| 动量 | 10% | vs MA20/MA60 |

## 局限性
- Sina API 不含行业分类，无法按行业过滤
- 财务数据（ROE/毛利率/营收增速）需要额外拉取
- 建议对 Top 候选用 MCP 搜索补充基本面
